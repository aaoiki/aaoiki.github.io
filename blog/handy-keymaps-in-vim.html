<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Handy Keymaps in Vim | aonemd</title>
    <link rel="canonical" href="https://aonemd.github.io/blog/handy-keymaps-in-vim">
    <link rel="alternate" type="application/rss+xml" title="aonemd" href="https://aonemd.github.io/feed.xml">

    <link rel="shortcut icon" type="image/x-icon" href="/public/logo.png" />
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/logo.png" />

    <link rel="stylesheet" href="/index.css">

    <meta name="description" content="In my first two posts in this Vim series, I talked about finding files inVim and having a minimal Vimsetup.  In this post I’m going to go over some usefulkey...">

<!-- facebook -->
<meta property="og:type" content="article" />
<meta property="og:url" content="https://aonemd.github.io/blog/handy-keymaps-in-vim" />
<meta property="og:site_name" content="aonemd" />
<meta property="og:title" content="Handy Keymaps in Vim" />
<meta property="og:description" content="Vim is a powerful text editor with great capabilities. You can map multiple keys to perform different functionalities in Vim that makes your text editing eas..." />

<!-- twitter -->
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@aonemd" />
<meta name="twitter:creator" content="@aonemd" />
<meta name="twitter:title" content="Handy Keymaps in Vim" />
<meta name="twitter:description" content="Vim is a powerful text editor with great capabilities. You can map multiple keys to perform different functionalities in Vim that makes your text editing eas..." />


<meta property="og:image"      content="https://aonemd.github.io/public/images/vim-logo.png" />
<meta name="twitter:image:src" content="https://aonemd.github.io/public/images/vim-logo.png" />


  </head>

  <body class="">
    <nav>
  <div class="title">
    <a href="/">a<span>one</span>md</a>
  </div>

  <label for="toggle">&#9776;</label>
  <input type="checkbox" id="toggle">

  <div class="menu">
    <a href="/about">
      about
    </a>
    <a href="/talks">
      talks
    </a>
    <a href="https://twitter.com/aonemd" target="_blank">
      <svg><use xlink:href="/public/icons-sprite.svg#icon-twitter"></use></svg>
    </a>
    <a href="https://github.com/aonemd" target="_blank">
      <svg><use xlink:href="/public/icons-sprite.svg#icon-github"></use></svg>
    </a>
    <a href="mailto:aonemdsaleh@gmail.com" target="_blank">
      <svg><use xlink:href="/public/icons-sprite.svg#icon-mail"></use></svg>
    </a>
    <a href="/feed.xml" target="_blank">
      <svg><use xlink:href="/public/icons-sprite.svg#icon-rss"></use></svg>
    </a>
    <a href="javascript:void(0)" id="theme-toggle">
      <svg><use xlink:href="/public/icons-sprite.svg#icon-light-up"></use></svg>
    </a>
  </div>
</nav>


    <article>
  <div class="row">
    <div class="col-6 col-m-12 center">
      <div class="view-post__en-title text-center center">
        <h2>Handy Keymaps in Vim <small class="view-post__category">Tools</small></h2>
        <b><span>May 27, 2019</span></b>
      </div>

      <br>

      <div lang='en'>
        <p>In my first two posts in this Vim series, I talked about <a href="/blog/finding-things-in-vim">finding files in
Vim</a> and <a href="/blog/minimal-vim">having a minimal Vim
setup</a>.  In this post I’m going to go over some useful
keymaps and functions you can use in Vim to boost your text editing abilities
and to master the Vim wizardry. I will only cover keymaps that don’t include
external plugins except for section #2 which will be about generating tags (I
couldn’t leave this part without covering it).</p>

<h3 id="essentials">Essentials</h3>

<p>First and foremost, the leader key is a special key in Vim that with other
combinations of keys can be mapped to perform certain functions. By default,
Vim maps the leader to the backslash key. I see many Vimmers (yes, this is a
word now) set it to the comma key. I, however, like to set it to the space bar;
it’s a big key in the middle of the keyboard so it’s really easy to find it and
use it with other key combinations:</p>

<div class="language-vimscript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">"The Leader</span>
<span class="k">let</span> mapleader<span class="p">=</span><span class="s2">"\&lt;Space&gt;"</span>
</code></pre></div></div>

<p>Now that we’ve mapped the leader key, we can start mapping other keys to
functions.</p>

<p>The first function in our list will be the save or the write buffer function.
Instead of using the shift and the semi-colon keys to generate a colon, typing
w, and then hitting Enter to save the current buffer, I found out that hitting
the space bar with the letter w is faster and easier to use specially for a
function that is used many times in the course of writing. This is just two key
presses instead of four:</p>

<div class="language-vimscript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">"save current buffer</span>
nnoremap <span class="p">&lt;</span>leader<span class="p">&gt;</span><span class="k">w</span> <span class="p">:</span><span class="k">w</span><span class="p">&lt;</span><span class="k">cr</span><span class="p">&gt;</span>
</code></pre></div></div>

<p>The second function is for replacing the current-under-cursor word with another
pattern/word. Simply, it copies the word under cursor and inserts it into a
substitution command call. You only need to type the replacement pattern and
press the Enter key to actually replace the text:</p>

<div class="language-vimscript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">"replace the word under cursor</span>
nnoremap <span class="p">&lt;</span>leader<span class="p">&gt;</span>* <span class="p">:</span>%s<span class="sr">/\&lt;&lt;c-r&gt;&lt;c-w&gt;\&gt;/</span>/<span class="p">&lt;</span><span class="k">left</span><span class="p">&gt;</span>
</code></pre></div></div>

<p>Next is a function that is found in many modern text editors, that is, auto
closing tags. Although sometimes it can get annoying when you don’t need it,
it’s handy most of the time when writing function definitions, if statements,
and other control structures in most popular languages. Each of the following
keymaps simply inserts a closing tag and puts the cursor in between the opening
and the closing tags:</p>

<div class="language-vimscript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">"autoclose tags</span>
inoremap <span class="p">(</span> <span class="p">()&lt;</span>Left<span class="p">&gt;</span>
inoremap <span class="p">{</span> <span class="p">{}&lt;</span>Left<span class="p">&gt;</span>
inoremap <span class="p">[</span> <span class="p">[]&lt;</span>Left<span class="p">&gt;</span>
inoremap <span class="s2">" "</span>"<span class="p">&lt;</span>Left<span class="p">&gt;</span>
</code></pre></div></div>

<p>I feel like this section got really long so here’s one last function. To move a
line up or down in Vim, normally you’d delete it and paste it into the desired
target line. These keymaps make it possible to move lines up or down using the
leader key + k or j (for up and down):</p>

<div class="language-vimscript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">"move lines around</span>
nnoremap <span class="p">&lt;</span>leader<span class="p">&gt;</span><span class="k">k</span> <span class="p">:</span><span class="k">m</span><span class="m">-2</span><span class="p">&lt;</span><span class="k">cr</span><span class="p">&gt;==</span>
nnoremap <span class="p">&lt;</span>leader<span class="p">&gt;</span><span class="k">j</span> <span class="p">:</span><span class="k">m</span><span class="p">+&lt;</span><span class="k">cr</span><span class="p">&gt;==</span>
xnoremap <span class="p">&lt;</span>leader<span class="p">&gt;</span><span class="k">k</span> <span class="p">:</span><span class="k">m</span><span class="m">-2</span><span class="p">&lt;</span><span class="k">cr</span><span class="p">&gt;</span>gv<span class="p">=</span>gv
xnoremap <span class="p">&lt;</span>leader<span class="p">&gt;</span><span class="k">j</span> <span class="p">:</span><span class="k">m</span>'<span class="p">&gt;+&lt;</span><span class="k">cr</span><span class="p">&gt;</span>gv<span class="p">=</span>gv
</code></pre></div></div>

<h3 id="generating-tags">Generating Tags</h3>

<p>As I mentioned before, this is the only section that includes an external
dependency. <a href="https://ctags.io/" target="blank"><em>Universal Ctags</em></a> is a tool
that analyzes the codebase and generates an index file of tags. This index of
tags can be used to jump between the definitions of functions, classes, and
other identifiers while navigating the code. You can jump to a tag definition
using the <code class="highlighter-rouge">:tag IDENTIFIER</code> command in Vim.</p>

<p>Since I’m trying not to switch context and leave the text editor as much as
possible, I made a keymap that generates the list of tags for me without
leaving Vim. The next block of code tells Vim where to look for tag definitions
by setting the <code class="highlighter-rouge">set tags</code> entry and maps <code class="highlighter-rouge">leader + ct</code> to generate the tag
list:</p>

<div class="language-vimscript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">set</span> <span class="k">tags</span><span class="p">+=.</span>git/<span class="k">tags</span>
nnoremap <span class="p">&lt;</span>leader<span class="p">&gt;</span>ct <span class="p">:!</span>ctags <span class="p">-</span>Rf <span class="p">.</span>git/<span class="k">tags</span> <span class="p">--</span>tag<span class="p">-</span>relative <span class="p">--</span>extra<span class="p">=+</span><span class="k">f</span> <span class="p">--</span>exclude<span class="p">=.</span>git<span class="p">,</span>pkg <span class="p">--</span>languages<span class="p">=-</span>sql<span class="p">&lt;</span><span class="k">cr</span><span class="p">&gt;&lt;</span><span class="k">cr</span><span class="p">&gt;</span>
</code></pre></div></div>

<p>You can also simplify the command above by moving the flags to a <code class="highlighter-rouge">~/.ctags</code>
file (each flag alone on a single line) and only having this in your .vimrc:</p>

<div class="language-vimscript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nnoremap <span class="p">&lt;</span>leader<span class="p">&gt;</span>ct <span class="p">:!</span>ctags <span class="p">-</span>Rf <span class="p">.</span>git/<span class="k">tags</span><span class="p">&lt;</span><span class="k">cr</span><span class="p">&gt;&lt;</span><span class="k">cr</span><span class="p">&gt;</span>
</code></pre></div></div>

<h3 id="manipulating-buffers">Manipulating Buffers</h3>

<p>Vim has this notion of buffers. Simply put, <a href="https://sanctum.geek.nz/arabesque/buffers-windows-tabs/" target="blank">a buffer is an open
file</a>.
A window in Vim is a way to view an open buffer.  A tab, on the other hand, is
a collection of windows. To save you (and myself) the pain, use buffers and
treat them the way you treat tabs in other text editors. You can read more
about buffers versus tabs and the best way to use them
<a href="https://joshldavis.com/2014/04/05/vim-tab-madness-buffers-vs-tabs/" target="blank">here</a>.</p>

<p>Anyway, I have a few keymaps that make it easier to manipulate and deal with
buffers. For example, to open and close buffers, I have in my .vimrc this block
of code:</p>

<div class="language-vimscript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">"create a new buffer (save it with :w ./path/to/FILENAME)</span>
nnoremap <span class="p">&lt;</span>leader<span class="p">&gt;</span>B <span class="p">:</span><span class="k">enew</span><span class="p">&lt;</span><span class="k">cr</span><span class="p">&gt;</span>
<span class="c">"close current buffer</span>
nnoremap <span class="p">&lt;</span>leader<span class="p">&gt;</span>bq <span class="p">:</span><span class="k">bp</span> <span class="p">&lt;</span>bar<span class="p">&gt;</span> <span class="k">bd</span><span class="p">!</span> #<span class="p">&lt;</span><span class="k">cr</span><span class="p">&gt;</span>
<span class="c">"close all open buffers</span>
nnoremap <span class="p">&lt;</span>leader<span class="p">&gt;</span><span class="k">ba</span> <span class="p">:</span><span class="k">bufdo</span> <span class="k">bd</span><span class="p">!&lt;</span><span class="k">cr</span><span class="p">&gt;</span>
</code></pre></div></div>

<p>The following is for switching between open buffers:</p>

<div class="language-vimscript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">"Tab to switch to next open buffer</span>
nnoremap <span class="p">&lt;</span>Tab<span class="p">&gt;</span> <span class="p">:</span><span class="k">bnext</span><span class="p">&lt;</span><span class="k">cr</span><span class="p">&gt;</span>
<span class="c">"Shift + Tab to switch to previous open buffer</span>
nnoremap <span class="p">&lt;</span>S<span class="p">-</span>Tab<span class="p">&gt;</span> <span class="p">:</span><span class="k">bprevious</span><span class="p">&lt;</span><span class="k">cr</span><span class="p">&gt;</span>
<span class="c">"leader key twice to cycle between last two open buffers</span>
nnoremap <span class="p">&lt;</span>leader<span class="p">&gt;&lt;</span>leader<span class="p">&gt;</span> <span class="p">&lt;</span><span class="k">c</span><span class="p">-</span>^<span class="p">&gt;</span>
</code></pre></div></div>

<p>You can install
<a href="https://github.com/ap/vim-buftabline" target="blank">vim-buftabline</a> to
visualize your open buffers and see how they are being switched by the keymaps
above.</p>

<h3 id="splits-splits-splits">Splits, Splits, Splits!</h3>

<p>Window splits are such an important element of my text editing since sometimes
I need to keep track on multiple files at the same time. Vim provides some
shortcuts for creating and moving around splits, however; they can be a little
unintuitive for quick navigation between splits.</p>

<p>To fix this, I have had a small function in my Vim configuration for a long
time that makes my life a lot easier. The function is mapped to a set of
intuitive combination of keys, namely, the control key + any of the navigation
keys (h, j, k, l).</p>

<p>What the function does is that it checks first if a split already exists in the
direction you want to move to. If it does, the function simply moves the focus
to that split. If there isn’t a split already, the function creates a new split
and moves the focus to that split. This function I took from someone some long
time ago. I can’t recall where I got it from, but all the credit is due to the
original author.</p>

<div class="language-vimscript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">"move to the split in the direction shown, or create a new split</span>
nnoremap <span class="p">&lt;</span><span class="k">silent</span><span class="p">&gt;</span> <span class="p">&lt;</span>C<span class="p">-</span><span class="k">h</span><span class="p">&gt;</span> <span class="p">:</span><span class="k">call</span> WinMove<span class="p">(</span><span class="s1">'h'</span><span class="p">)&lt;</span><span class="k">cr</span><span class="p">&gt;</span>
nnoremap <span class="p">&lt;</span><span class="k">silent</span><span class="p">&gt;</span> <span class="p">&lt;</span>C<span class="p">-</span><span class="k">j</span><span class="p">&gt;</span> <span class="p">:</span><span class="k">call</span> WinMove<span class="p">(</span><span class="s1">'j'</span><span class="p">)&lt;</span><span class="k">cr</span><span class="p">&gt;</span>
nnoremap <span class="p">&lt;</span><span class="k">silent</span><span class="p">&gt;</span> <span class="p">&lt;</span>C<span class="p">-</span><span class="k">k</span><span class="p">&gt;</span> <span class="p">:</span><span class="k">call</span> WinMove<span class="p">(</span><span class="s1">'k'</span><span class="p">)&lt;</span><span class="k">cr</span><span class="p">&gt;</span>
nnoremap <span class="p">&lt;</span><span class="k">silent</span><span class="p">&gt;</span> <span class="p">&lt;</span>C<span class="p">-</span><span class="k">l</span><span class="p">&gt;</span> <span class="p">:</span><span class="k">call</span> WinMove<span class="p">(</span><span class="s1">'l'</span><span class="p">)&lt;</span><span class="k">cr</span><span class="p">&gt;</span>

<span class="k">function</span><span class="p">!</span> WinMove<span class="p">(</span>key<span class="p">)</span>
  <span class="k">let</span> <span class="k">t</span><span class="p">:</span>curwin <span class="p">=</span> winnr<span class="p">()</span>
  exec <span class="s2">"wincmd "</span><span class="p">.</span><span class="nv">a:key</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">t</span><span class="p">:</span>curwin <span class="p">==</span> winnr<span class="p">())</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">match</span><span class="p">(</span><span class="nv">a:key</span><span class="p">,</span><span class="s1">'[jk]'</span><span class="p">))</span>
      <span class="k">wincmd</span> <span class="k">v</span>
    <span class="k">else</span>
      <span class="k">wincmd</span> s
    <span class="k">endif</span>
    exec <span class="s2">"wincmd "</span><span class="p">.</span><span class="nv">a:key</span>
  <span class="k">endif</span>
<span class="k">endfunction</span>
</code></pre></div></div>

<p>Vim is a powerful text editor with great capabilities. You can map multiple
keys to perform different functionalities in Vim that makes your text editing
easier.</p>

<p>All the code in this post is taken from my .vimrc file in my dotfiles
repository on GitHub. You can check it out
<a href="https://github.com/aonemd/aaku" target="blank">here</a>.</p>

      </div>

      
        <div class="row">
  <div class="col-12 text-center">
    <div class="social">
        <a id="twitter" href="https://twitter.com/share?url=https://aonemd.github.io/blog/handy-keymaps-in-vim&text=Handy Keymaps in Vim&hashtags=vim,keymaps,software,development,tools&via=aonemd" target="_blank">
          <svg><use xlink:href="/public/icons-sprite.svg#icon-twitter"></use></svg>
        </a>
        <a id="reddit" href="https://reddit.com/submit?url=https://aonemd.github.io/blog/handy-keymaps-in-vim&title=Handy Keymaps in Vim" target="_blank">
          <svg><use xlink:href="/public/icons-sprite.svg#icon-reddit"></use></svg>
        </a>
        <a id="linkedin" href="https://www.linkedin.com/shareArticle?mini=true&title=Handy Keymaps in Vim&url=https://aonemd.github.io/blog/handy-keymaps-in-vim" target="_blank">
          <svg><use xlink:href="/public/icons-sprite.svg#icon-linkedin"></use></svg>
        </a>
        <a id="googleplus" href="https://plus.google.com/share?url=https://aonemd.github.io/blog/handy-keymaps-in-vim" target="_blank">
          <svg><use xlink:href="/public/icons-sprite.svg#icon-googleplus"></use></svg>
        </a>
        <a id="pocket" href="https://getpocket.com/save?url=https://aonemd.github.io/blog/handy-keymaps-in-vim&title=Handy Keymaps in Vim" target="_blank">
          <svg><use xlink:href="/public/icons-sprite.svg#icon-pocket"></use></svg>
        </a>
    </div>
  </div>
</div>

        <hr>

<input type="hidden" id="issueId" value="21">
<div id="comments"></div>

<link rel="stylesheet" href="/comments.css">
<script type="text/javascript"
        src="/comments.js"
        async>
</script>

      
    </div>
  </div>
</article>


    <script async type="text/javascript" src="/index.js" charset="utf-8"></script>
  </body>
</html>
